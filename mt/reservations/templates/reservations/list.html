{% extends "base.html" %}

{% block content %}
    <div class="container mt-4">
        <h2 class="text-center mb-4">üìÖ –°–ø–∏—Å–æ–∫ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π</h2>
        <div class="d-flex justify-content-between mb-3">
            <a href="{% url 'add_reservation' %}" class="btn btn-success">‚ûï –°–æ–∑–¥–∞—Ç—å –±—Ä–æ–Ω—å</a>
        </div>

        <div class="table-responsive">
            <table class="table table-striped table-bordered text-center">
                <thead class="table-dark">
                    <tr>
                        <th>ID</th>
                        <th>–ö–ª–∏–µ–Ω—Ç</th>
                        <th>–°—Ç–æ–ª–∏–∫</th>
                        <th>–î–∞—Ç–∞</th>
                        <th>–°—Ç–∞—Ç—É—Å</th>
                        <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                    </tr>
                </thead>
                <tbody>
                    {% for reservation in reservations %}
                    <tr>
                        <td>{{ reservation.id }}</td>
                        <td>{{ reservation.customer.name }}</td>
                        <td>‚Ññ{{ reservation.table.number }}</td>
                        <td>{{ reservation.date }}</td>
                        <td>
                            <form action="{% url 'change_reservation_status' reservation.id %}" method="post" style="display:inline;">
                                {% csrf_token %}
                                <select name="status" class="form-select form-select-sm
                                    {% if reservation.status == 'pending' %} bg-warning text-dark 
                                    {% elif reservation.status == 'confirmed' %} bg-success text-white 
                                    {% elif reservation.status == 'cancelled' %} bg-danger text-white {% endif %}"
                                    onchange="this.form.submit();">
                                    <option value="pending" {% if reservation.status == "pending" %}selected{% endif %}>–û–∂–∏–¥–∞–Ω–∏–µ</option>
                                    <option value="confirmed" {% if reservation.status == "confirmed" %}selected{% endif %}>–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ</option>
                                    <option value="cancelled" {% if reservation.status == "cancelled" %}selected{% endif %}>–û—Ç–º–µ–Ω–µ–Ω–æ</option>
                                </select>
                            </form>
                        </td>
                        <td>
                            <a href="{% url 'delete_reservation' reservation.id %}" class="btn btn-outline-danger btn-sm"
                               onclick="return confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å –±—Ä–æ–Ω—å?');">
                                üóë –£–¥–∞–ª–∏—Ç—å
                            </a>
                        </td>
                    </tr>
                    {% empty %}
                    <tr>
                        <td colspan="6" class="text-muted">–ù–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
{% endblock %}
